import{o,c,b as p,g as k,a as t,d as C,t as s,F as v,w as x,h as g,r as h,i as S,j as $,v as T}from"./index-CfIUC3cQ.js";const D=["onClick"],V={class:"d-flex w-100 justify-content-between"},U={class:"mb-1"},j={class:"mb-1"},B={__name:"SellGoods",props:["data"],emits:["addToCart"],setup(r,{emit:u}){const i=u;return(l,m)=>(o(!0),c(v,null,p(r.data,e=>(o(),c("a",{href:"#",class:"list-group-item list-group-item-action",key:r.data.id,onClick:k(d=>i("addToCart",e),["prevent"])},[t("div",V,[t("h5",U,[C(s(e.name)+" ",1),t("small",null,"$"+s(e.price),1)])]),t("p",j,s(e.detail),1)],8,D))),128))}},M=["onClick"],N=["onUpdate:modelValue","onChange"],F=["value"],O={__name:"SelectCart",props:["cart"],emits:["deleteCart","updateCart","itemSum"],setup(r,{emit:u}){const i=u;return(l,m)=>(o(!0),c(v,null,p(r.cart,e=>(o(),c("tr",{key:r.cart.id},[t("td",null,[t("button",{onClick:d=>i("deleteCart",e.id),class:"btn btn-secondary btn-sm",type:"button"}," x ",8,M)]),t("td",null,s(e.name),1),t("td",null,[t("small",null,s(e.detail),1)]),t("td",null,[x(t("select",{class:"form-select","onUpdate:modelValue":d=>e.amount=d,onChange:d=>i("updateCart",e)},[(o(),c(v,null,p(10,d=>t("option",{key:d,value:d},s(d),9,F)),64))],40,N),[[g,e.amount]])]),t("td",null,s(e.price),1),t("td",null,s(i("itemSum",e)),1)]))),128))}},Q={class:"card-body"},A=t("div",{class:"card-title"},[t("h3",null,"訂單")],-1),E={class:"table"},G=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"品項"),t("th",{scope:"col",width:"90"},"數量"),t("th",{scope:"col"},"小計")])],-1),I={class:"text-end mb-3"},L=t("br",null,null,-1),q={__name:"ConfirmOrder",props:["order"],emits:["itemSum"],setup(r,{emit:u}){const i=u;return(l,m)=>(o(),c("div",Q,[A,t("table",E,[G,t("tbody",null,[(o(!0),c(v,null,p(r.order.cart,e=>(o(),c("tr",{key:e.id},[t("td",null,s(e.name),1),t("td",null,s(e.amount),1),t("td",null,s(i("itemSum",e)),1)]))),128))])]),t("div",I,[t("div",null,"備註："+s(r.order.description),1),L,t("h4",null,[C(" 總計："),t("span",null,"$"+s(r.order.total),1)])])]))}},z={class:"container mt-5"},H={class:"row"},J={class:"col-md-4"},K={class:"list-group"},P={class:"col-md-8"},R={key:0,class:"alert alert-primary text-center",role:"alert"},W={key:1},X={class:"table"},Y=t("thead",null,[t("tr",null,[t("th",{scope:"col",width:"50"},"操作"),t("th",{scope:"col"},"品項"),t("th",{scope:"col"},"描述"),t("th",{scope:"col",width:"90"},"數量"),t("th",{scope:"col"},"單價"),t("th",{scope:"col"},"小計")])],-1),Z={class:"text-end mb-3"},tt={class:"text-end"},et=t("hr",null,null,-1),lt={class:"row justify-content-center"},at={class:"col-md-8"},st={key:0,class:"alert alert-primary text-center",role:"alert"},nt={key:1,class:"card"},ot=t("br",null,null,-1),it={__name:"week3",setup(r){const u=h([{id:1,name:"珍珠奶茶",detail:"香濃奶茶搭配QQ珍珠",price:50},{id:2,name:"冬瓜檸檬",detail:"清新冬瓜配上新鮮檸檬",price:50},{id:3,name:"翡翠檸檬",detail:"綠茶與檸檬的完美結合",price:55},{id:4,name:"四季春茶",detail:"香醇四季春茶，回甘無比",price:45},{id:5,name:"阿薩姆奶茶",detail:"阿薩姆紅茶搭配香醇鮮奶",price:50},{id:6,name:"檸檬冰茶",detail:"檸檬與冰茶的清新組合",price:45},{id:7,name:"芒果綠茶",detail:"芒果與綠茶的獨特風味",price:55},{id:8,name:"抹茶拿鐵",detail:"抹茶與鮮奶的絕配",price:60}]),i=h({}),l=h([]),m=n=>{const a=l.value.find(b=>b.name===n.name);a?a.amount+=1:l.value.push({...n,id:new Date().getTime(),amount:1})},e=n=>{l.value=l.value.map(a=>(a.id===n.id&&(a.sum=parseInt(n.price)),a))},d=n=>{l.value=l.value.filter(a=>a.id!==n)},f=n=>n.price*n.amount,y=S(()=>l.value.reduce((n,a)=>n+a.price*a.amount,0)),_=h(""),w=()=>{i.value={id:new Date().getTime(),cart:l.value,description:_.value,total:y.value},l.value=[],_.value=""};return(n,a)=>(o(),c("div",z,[t("div",H,[t("div",J,[t("div",K,[$(B,{data:u.value,onAddToCart:m},null,8,["data"])])]),t("div",P,[l.value.length===0?(o(),c("div",R," 請選擇商品 ")):(o(),c("div",W,[t("table",X,[Y,t("tbody",null,[$(O,{cart:l.value,onDeleteCart:d,onUpdateCart:e,onItemSum:f},null,8,["cart"])])]),t("div",Z,[t("h4",null,[C(" 總計："),t("span",null,"$"+s(y.value),1)]),x(t("textarea",{class:"form-control mb-3",rows:"3",placeholder:"備註","onUpdate:modelValue":a[0]||(a[0]=b=>_.value=b)},null,512),[[T,_.value]]),t("div",tt,[t("button",{onClick:k(w,["prevent"]),class:"btn btn-primary"},"送出")])])]))])]),et,t("div",lt,[t("div",at,[i.value.id?(o(),c("div",nt,[$(q,{order:i.value,onItemSum:f},null,8,["order"])])):(o(),c("div",st," 尚未建立訂單 "))])]),ot]))}};export{it as default};
